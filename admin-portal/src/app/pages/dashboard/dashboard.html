<div class="dashboard-layout">
    <app-sidebar></app-sidebar>
    <div class="dashboard-content">
        <app-header></app-header>
        <div class="dashboard-main">
            <div class="dashboard-overview-row">
                <h2>Overview</h2>
                <div class="dashboard-ago">
                    {{ dateAgo }}
                </div>
                <ion-icon name="caret-forward-outline"></ion-icon>
                <div class="dashboard-now">
                    {{ dateNow }}
                </div>
            </div>
            <div class="dashboard-cards">
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <div class="dashboard-card-title">{{ memberCount !== null ? memberCount : '—' }} Members</div>
                    </div>
                    <div class="dashboard-card-desc">Total members</div>
                </div>
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <div class="dashboard-card-title">{{ voucherCount !== null ? voucherCount : '—' }} Vouchers
                        </div>
                    </div>
                    <div class="dashboard-card-desc">Total redemptions</div>
                </div>
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <div class="dashboard-card-title">{{ totalEarnedPoints !== null ? (totalEarnedPoints |
                            number:'1.0-0') : '—' }} Points</div>
                    </div>
                    <div class="dashboard-card-desc">Total awarded points</div>
                </div>
            </div>
            <div class="dashboard-summary-first-row">
                <div class="dashboard-card summary-card">
                    <div class="dashboard-card-content">
                        <div class="dashboard-card-title" style="grid-column: 1 / span 2; text-align: center;">
                            {{ dateAgoMonthYear }} - {{ dateNowMonthYear }}
                        </div>
                        <div class="dashboard-card-col-left">
                            <div class="dashboard-bar-breakdown-group">
                                <div class="dashboard-bar-group">
                                    <div class="dashboard-bar-total">
                                        <div class="dashboard-bar-fill"
                                            [ngStyle]="{ height: (barTotalFill * barTotalHeight) + 'px', background: '#b61624' }">
                                        </div>
                                    </div>
                                    <div class="dashboard-bar-counter-total">
                                        {{ voucherBreakdown?.total ?? '—' }}
                                    </div>
                                </div>
                                <div class="dashboard-bar-breakdown-right">
                                    <div class="dashboard-bar-breakdown-label">Vouchers breakdown</div>
                                    <div class="dashboard-bar-label-row">
                                        <div class="dashboard-bar-label">Used</div>
                                        <div class="dashboard-bar-label">Unused</div>
                                    </div>
                                    <div class="dashboard-bar-bars">
                                        <div class="dashboard-bar-group">
                                            <div class="dashboard-bar-used">
                                                <div class="dashboard-bar-fill"
                                                    [ngStyle]="{ height: (barUsedFill * barUsedHeight) + 'px', background: '#b61624' }">
                                                </div>
                                            </div>
                                            <div class="dashboard-bar-counter">
                                                {{ voucherBreakdown?.used ?? '—' }}
                                            </div>
                                        </div>
                                        <div class="dashboard-bar-group">
                                            <div class="dashboard-bar-unused">
                                                <div class="dashboard-bar-fill"
                                                    [ngStyle]="{ height: (barUnusedFill * barUnusedHeight) + 'px', background: '#b61624' }">
                                                </div>
                                            </div>
                                            <div class="dashboard-bar-counter">
                                                {{ voucherBreakdown?.unused ?? '—' }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-card-col-right">
                            <div class="dashboard-points-label">Points Redeemers / Members</div>
                            <div class="dashboard-points-outer-container">
                                <div class="dashboard-points-inner-container">
                                    <span>{{ pointsRedeemers !== null && memberCount !== null ? pointsRedeemers + ' / '
                                        +
                                        memberCount : '—' }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dashboard-card redemption-card">
                    <div class="dashboard-card-header">
                        <div class="dashboard-card-title"></div>
                    </div>
                    <div class="dashboard-card-desc"></div>
                </div>
                <div class="dashboard-card ranking-card">
                    <div class="dashboard-card-header">
                        <div class="ranking-card-title">Top 10 Members</div>
                    </div>
                    <div class="dashboard-ranking-list">
                        <ng-container *ngFor="let member of top10Ranking">
                            <div class="dashboard-ranking-row">
                                <div class="dashboard-ranking-info">
                                    <div class="dashboard-ranking-name">{{ member.fullName }}</div>
                                    <div class="dashboard-ranking-email">{{ member.email }}</div>
                                </div>
                                <div class="dashboard-ranking-points">{{ member.totalEarnedPoints | number:'1.0-0' }}
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
            <div class="dashboard-summary-second-row">
                <div class="dashboard-card transactions-card">
                    <div class="dashboard-card-header">
                        <div class="transactions-card-title">Latest Voucher Transactions</div>
                    </div>
                    <div class="dashboard-transactions-table">
                        <div class="dashboard-transactions-header">
                            <div class="dashboard-transactions-col points">Points</div>
                            <div class="dashboard-transactions-col member">Member</div>
                            <div class="dashboard-transactions-col code">Voucher Code</div>
                            <div class="dashboard-transactions-col status">Status</div>
                            <div class="dashboard-transactions-col created">Created On</div>
                        </div>
                        <ng-container *ngFor="let tx of latestTransactions">
                            <div class="dashboard-transactions-row">
                                <div class="dashboard-transactions-col points">{{ tx.points | number:'1.0-2' }}</div>
                                <div class="dashboard-transactions-col member">{{ tx.member }}</div>
                                <div class="dashboard-transactions-col code">{{ tx.voucherCode }}</div>
                                <div class="dashboard-transactions-col status"></div>
                                <div class="dashboard-transactions-col created">
                                    {{ tx.createdOn | date:'d MMM yyyy' }}
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>
                <div class="dashboard-card member-card">
                    <div class="dashboard-card-header">
                        <div class="dashboard-card-title"></div>
                    </div>
                    <div class="dashboard-card-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>