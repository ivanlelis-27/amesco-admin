<div class="notif">
    <div class="notif-main">
        <div class="notif-row">
            <div class="notif-create">
                <input type="text" class="notif-title" placeholder="Title*" [(ngModel)]="title" />
                <input type="text" class="notif-desc" placeholder="Description" [(ngModel)]="description" />
                <textarea class="notif-body" placeholder="Message Body" [(ngModel)]="messageBody"></textarea>
                <div class="notif-when-row">
                    <label>When:</label>
                    <input matInput [matDatepicker]="picker" class="notif-when" [(ngModel)]="scheduledAt"
                        placeholder="Select Date" readonly (click)="picker.open()" />
                    <mat-datepicker #picker></mat-datepicker>
                </div>
                <div class="notif-image-row">
                    <label>
                        <input type="checkbox" [(ngModel)]="includeImage" />
                        Tick below to include image
                    </label>
                    <div class="notif-image-upload" (click)="imageInput.click()">
                        <ng-container *ngIf="!imagePreviewUrl; else previewImage">
                            <div class="image-icon">
                                <fa-icon [icon]="faImage"></fa-icon>
                            </div>
                        </ng-container>
                        <ng-template #previewImage>
                            <img [src]="imagePreviewUrl" alt="Preview"
                                style="width:100%;height:100%;object-fit:cover;border-radius:8px;" />
                        </ng-template>
                        <input #imageInput type="file" accept="image/*" style="display:none"
                            (change)="onImageSelected($event)" />
                    </div>
                </div>
                <button class="notif-create-btn" (click)="createNotification()">CREATE NOTIFICATION</button>
            </div>
            <div class="notif-history">
                <div class="notif-history-header">HISTORY</div>
                <div class="past-notif-list">
                    <div class="scheduled-notif-card" *ngFor="let notif of pastNotifications">
                        <div class="scheduled-notif-card-row">
                            <div class="scheduled-notif-img">
                                <ng-container *ngIf="notif.includeImage && notif.imageBase64; else noImage">
                                    <img [src]="'data:image/png;base64,' + notif.imageBase64" alt="Notification Image"
                                        style="width:100%;height:100%;object-fit:cover;border-radius:8px;" />
                                </ng-container>
                                <ng-template #noImage>
                                    <div class="scheduled-notif-noimg">No Image</div>
                                </ng-template>
                            </div>
                            <div class="scheduled-notif-info">
                                <div class="scheduled-notif-title">{{ notif.title }}</div>
                                <div class="scheduled-notif-desc">{{ notif.description }}</div>
                                <div class="scheduled-notif-body">{{ notif.messageBody }}</div>
                                <div class="scheduled-notif-date">
                                    {{ notif.scheduledAt | date:'medium' }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="pastNotifications.length === 0" class="scheduled-notif-empty">
                        No past scheduled notifications.
                    </div>
                </div>
            </div>
        </div>
        <div class="notif-scheduled" [style.padding-bottom]="scheduledPaddingBottom">
            <div class="ann-scheduled-header">SCHEDULED NOTIFICATIONS</div>
            <div class="scheduled-notif-list">
                <div class="scheduled-notif-card" *ngFor="let notif of upcomingNotifications">
                    <div class="scheduled-notif-card-row">
                        <div class="scheduled-notif-img">
                            <ng-container *ngIf="notif.includeImage && notif.imageBase64; else noImage">
                                <img [src]="'data:image/png;base64,' + notif.imageBase64" alt="Notification Image"
                                    style="width:100%;height:100%;object-fit:cover;border-radius:8px;" />
                            </ng-container>
                            <ng-template #noImage>
                                <div class="scheduled-notif-noimg">No Image</div>
                            </ng-template>
                        </div>
                        <div class="scheduled-notif-info">
                            <div class="scheduled-notif-title">{{ notif.title }}</div>
                            <div class="scheduled-notif-desc">{{ notif.description }}</div>
                            <div class="scheduled-notif-body">{{ notif.messageBody }}</div>
                            <div class="scheduled-notif-date">
                                Scheduled At: {{ notif.scheduledAt | date:'medium' }}
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="upcomingNotifications.length === 0" class="scheduled-notif-empty">
                    No scheduled notifications.
                </div>
            </div>
        </div>
    </div>
</div>